$(document).ready(function(){var e=new XMLHttpRequest;e.open("GET","http://codeit.pro/codeitCandidates/serverFrontendTest/company/getList",!0),e.send();var t=new XMLHttpRequest;t.open("GET","http://codeit.pro/codeitCandidates/serverFrontendTest/news/getList",!0),t.send();var a=setInterval(function(){if(4===e.readyState&&4===t.readyState){var n,r;clearInterval(a),n=JSON.parse(e.responseText),r=JSON.parse(t.responseText);var i=$(".result-total"),o=$(".preloader"),s=$(".result-companies"),l=$(".company-partners"),c=$("form"),p=$("#piechart_3d"),d=$(".news-companies"),u=$(".add"),m=document.createElement("a");u.append(m),m.innerHTML="my CV",m.setAttribute("href","https://hh.ru/resume/a633e285ff050700d30039ed1f72386f523849");var g=$(".add a");i.text(n.list.length+" companies"),o.removeClass("preloader"),o.css({opacity:"0",transition:"opacity 1s linear"}),i.css({opacity:"1",transition:"opacity 3s linear"}),s.css({opacity:"1",transition:"opacity 3s linear"}),l.css({opacity:"1",transition:"opacity 3s linear"}),c.css({opacity:"1",transition:"opacity 3s linear"}),p.css({opacity:"1",transition:"opacity 3s linear"}),d.css({opacity:"1",transition:"opacity 3s linear"}),g.css({opacity:"1",transition:"opacity 3s linear"});var h=document.createElement("ul");s.append(h);for(var v=0;v<n.list.length;v++)y(v);function y(e){var t=document.createElement("a");t.innerHTML=n.list[e].name,t.setAttribute("data",e);var a=document.createElement("li");a.appendChild(t),document.body.getElementsByTagName("ul")[0].appendChild(a)}var f=[];f[0]=n.list[70].location.name;var T=!0;for(v=0;v<n.list.length;v++){for(var E=0;E<f.length;E++)n.list[v].location.name===f[E]&&(T=!1);T&&f.push(n.list[v].location.name)}for(var L=[],M=0;M<f.length;M++){L[M]=0;for(v=0;v<n.list.length;v++)f[M]===n.list[v].location.name&&(L[M]+=1)}google.charts.load("current",{packages:["corechart"]}),google.charts.setOnLoadCallback(function(){for(var e=[],t=0;t<f.length+1;t++)e[t]=[];e[0]=["Task","H"];for(var a=1;a<e.length;a++)e[a][0]=f[a-1],e[a][1]=L[a-1];var n=google.visualization.arrayToDataTable(e);new google.visualization.PieChart(document.getElementById("piechart_3d")).draw(n,{title:"",width:320,height:250,backgroundColor:"transparent",stroke:"white",is3D:!0})}),$("ul li a").click(function(){var e=$("input[name=sort]:checked").val(),t=this.getAttribute("data"),a=" ",r=[];l.text(function(){r=n.list[parseInt(t)].partners.sort(function(e,t){return e.value-t.value}),"waning"===e&&r.reverse();for(var i=0;i<r.length;i++)a+=r[i].name+": "+r[i].value+"%; ";return a})});var w=document.createElement("ul");d.append(w);for(v=0;v<r.list.length;v++)C(v);function C(e){var t,a,n,i,o=document.createElement("li"),s=document.createElement("a"),l=document.createElement("img"),c=document.createElement("span"),p=document.createElement("span"),d=document.createElement("p");document.body.getElementsByTagName("ul")[1].append(o),o.append(s),o.append(l),o.append(c),o.append(p),o.append(d),s.innerHTML="Title "+(e+1),l.src=r.list[e].img,c.innerHTML=r.list[e].author,p.innerHTML=(t=r.list[e].date,a=new Date(1e3*t),n=a.getFullYear(),i=a.getMonth()+1<10?"0"+(a.getMonth()+1):a.getMonth()+1,a.getDate()+"."+i+"."+n),d.innerHTML=r.list[e].description}}},2e3)});