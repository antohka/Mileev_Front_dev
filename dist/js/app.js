$(document).ready(function(){var e=new XMLHttpRequest;e.open("GET","http://codeit.pro/codeitCandidates/serverFrontendTest/company/getList",!0),e.send();var t=new XMLHttpRequest;t.open("GET","http://codeit.pro/codeitCandidates/serverFrontendTest/news/getList",!0),t.send();var n=setInterval(function(){if(4===e.readyState&&4===t.readyState){var a,r;clearInterval(n),a=JSON.parse(e.responseText),r=JSON.parse(t.responseText),$(".result-total").text(a.list.length+" companies"),$(".preloader").removeClass("preloader"),$(".preloader").css({opacity:"0",transition:"opacity 1s linear"}),$(".result-total").css({opacity:"1",transition:"opacity 3s linear"}),$(".result-companies").css({opacity:"1",transition:"opacity 3s linear"}),$(".company-partners").css({opacity:"1",transition:"opacity 3s linear"}),$("form").css({opacity:"1",transition:"opacity 3s linear"}),$("#piechart_3d").css({opacity:"1",transition:"opacity 3s linear"}),$(".news-companies").css({opacity:"1",transition:"opacity 3s linear"}),$(".add a").css({opacity:"1",transition:"opacity 3s linear"});var i=document.createElement("ul");document.querySelector(".result-companies").appendChild(i);for(var o=0;o<a.list.length;o++)l(o);function l(e){var t=document.createElement("a");t.innerHTML=a.list[e].name;var n=document.createElement("li");n.appendChild(t),document.body.getElementsByTagName("ul")[0].appendChild(n)}var s=[];s[0]=a.list[70].location.name;var c=!0;for(o=0;o<a.list.length;o++){for(var d=0;d<s.length;d++)a.list[o].location.name===s[d]&&(c=!1);c&&s.push(a.list[o].location.name)}for(var p=[],u=0;u<s.length;u++){p[u]=0;for(o=0;o<a.list.length;o++)s[u]===a.list[o].location.name&&(p[u]+=1)}google.charts.load("current",{packages:["corechart"]}),google.charts.setOnLoadCallback(function(){for(var e=[],t=0;t<s.length+1;t++)e[t]=[];e[0]=["Task","H"];for(var n=1;n<e.length;n++)e[n][0]=s[n-1],e[n][1]=p[n-1];var a=google.visualization.arrayToDataTable(e);new google.visualization.PieChart(document.getElementById("piechart_3d")).draw(a,{title:"",width:320,height:250,backgroundColor:"transparent",stroke:"white",is3D:!0})}),$("ul li a").click(function(){var e=$("input[name=sort]:checked").val(),t=this.innerHTML,n=" ",r=[];$(".company-partners").text(function(){for(var i=0;i<a.list.length;i++)if(a.list[i].name===t){r=a.list[i].partners.sort(function(e,t){return e.value-t.value}),"growth"===e&&r.reverse();for(var o=0;o<r.length;o++)n+=r[o].name+": "+r[o].value+"%; ";return n}})});var m=document.createElement("ul");document.querySelector(".news-companies").appendChild(m);var h=document.createElement("a");document.querySelector(".add").appendChild(h),h.innerHTML=r.list[0].link,h.setAttribute("href","https://codeit.us/"),h.setAttribute("alt","photo");for(o=0;o<r.list.length;o++)g(o);function g(e){var t,n,a,i,l=document.createElement("li"),s=document.createElement("a"),c=document.createElement("img"),d=document.createElement("span"),p=document.createElement("span"),u=document.createElement("p");document.body.getElementsByTagName("ul")[1].appendChild(l),l.appendChild(s),l.appendChild(c),l.appendChild(d),l.appendChild(p),l.appendChild(u),s.innerHTML="Title "+(o+1),c.src=r.list[o].img,d.innerHTML=r.list[o].author,p.innerHTML=(t=r.list[o].date,n=new Date(1e3*t),a=n.getFullYear(),i=n.getMonth()+1<10?"0"+(n.getMonth()+1):n.getMonth()+1,n.getDate()+"."+i+"."+a),u.innerHTML=r.list[o].description}}}, 2000)});