"use strict";$(document).ready(function(){var e,t=new XMLHttpRequest;t.open("GET","http://codeit.pro/codeitCandidates/serverFrontendTest/company/getList",!1),t.send(),e=JSON.parse(t.responseText);var n,a=new XMLHttpRequest;a.open("GET","http://codeit.pro/codeitCandidates/serverFrontendTest/news/getList",!1),a.send(),n=JSON.parse(a.responseText),4==t.readyState&&4==a.readyState&&setTimeout(function(){$(".preloader").css({opacity:"0",transition:"opacity 1s linear"}),$(".result-total").css({opacity:"1",transition:"opacity 3s linear"}),$(".result-companies").css({opacity:"1",transition:"opacity 3s linear"}),$(".company-partners").css({opacity:"1",transition:"opacity 3s linear"}),$("form").css({opacity:"1",transition:"opacity 3s linear"}),$("#piechart_3d").css({opacity:"1",transition:"opacity 3s linear"}),$(".news-companies").css({opacity:"1",transition:"opacity 3s linear"}),$(".add a").css({opacity:"1",transition:"opacity 3s linear"}),$(".preloader").removeClass("preloader")},3e3),$(".result-total").text(e.list.length+" companies");var r=document.createElement("ul");document.querySelector(".result-companies").appendChild(r);for(var i=0;i<e.list.length;i++)o(i);function o(t){var n=document.createElement("a");n.innerHTML=e.list[t].name;var a=document.createElement("li");a.appendChild(n),document.body.getElementsByTagName("ul")[0].appendChild(a)}var s=[];s[0]=e.list[70].location.name;var l=!0;for(i=0;i<e.list.length;i++){for(var c=0;c<s.length;c++)e.list[i].location.name===s[c]&&(l=!1);l&&s.push(e.list[i].location.name)}for(var d=[],p=0;p<s.length;p++){d[p]=0;for(i=0;i<e.list.length;i++)s[p]===e.list[i].location.name&&(d[p]+=1)}google.charts.load("current",{packages:["corechart"]}),google.charts.setOnLoadCallback(function(){for(var e=[],t=0;t<s.length+1;t++)e[t]=[];e[0]=["Task","H"];for(var n=1;n<e.length;n++)e[n][0]=s[n-1],e[n][1]=d[n-1];var a=google.visualization.arrayToDataTable(e);new google.visualization.PieChart(document.getElementById("piechart_3d")).draw(a,{title:"",width:320,height:250,backgroundColor:"transparent",stroke:"white",is3D:!0})}),$("ul li a").click(function(){var t=$("input[name=sort]:checked").val(),n=this.innerHTML,a=" ",r=[];$(".company-partners").text(function(){for(var i=0;i<e.list.length;i++)if(e.list[i].name===n){r=e.list[i].partners.sort(function(e,t){return e.value-t.value}),"growth"===t&&r.reverse();for(var o=0;o<r.length;o++)a+=r[o].name+": "+r[o].value+"%; ";return a}})});var u=document.createElement("ul");document.querySelector(".news-companies").appendChild(u);var m=document.createElement("a");document.querySelector(".add").appendChild(m),m.innerHTML=n.list[0].link,m.setAttribute("href","https://codeit.us/"),m.setAttribute("alt","photo");for(i=0;i<n.list.length;i++)h(i);function h(e){var t,a,r,o,s=document.createElement("li"),l=document.createElement("a"),c=document.createElement("img"),d=document.createElement("span"),p=document.createElement("span"),u=document.createElement("p");document.body.getElementsByTagName("ul")[1].appendChild(s),s.appendChild(l),s.appendChild(c),s.appendChild(d),s.appendChild(p),s.appendChild(u),l.innerHTML="Title "+(i+1),c.src=n.list[i].img,d.innerHTML=n.list[i].author,p.innerHTML=(t=n.list[i].date,a=new Date(1e3*t),r=a.getFullYear(),o=a.getMonth()+1<10?"0"+(a.getMonth()+1):a.getMonth()+1,a.getDate()+"."+o+"."+r),u.innerHTML=n.list[i].description}});